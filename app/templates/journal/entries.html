{% extends "base_logged_in.html" %}

{% block content %}
<div class="entries-container">
    <h2 class="page-title">Journal Entries</h2>
    
    <div class="search-section">
        <form method="GET" action="{{ url_for('journal.view_entries') }}" class="search-form">
            <input type="text" name="search" placeholder="Search entries..." value="{{ search_term }}">
            <button type="submit" class="search-button">Search</button>
        </form>
    </div>

    {% if entries %}
    <section class="latest-entry">
        <h3 class="section-title">Latest Entry</h3>
        <div class="entry-card">
            <div class="entry-header">
                <span class="entry-date">{{ entries[0].entry_date.strftime('%Y-%m-%d %H:%M') }}</span>
                <span class="entry-mood">{{ entries[0].mood }}</span>
            </div>
            <div class="entry-content">
                <div class="content-section">
                    <h4>Gratitude</h4>
                    <p>{{ entries[0].gratitude }}</p>
                </div>
                <div class="content-section">
                    <h4>Room for Growth</h4>
                    <p>{{ entries[0].room_for_growth }}</p>
                </div>
                <div class="content-section">
                    <h4>Thoughts</h4>
                    <p>{{ entries[0].thoughts }}</p>
                </div>
                {% if entries[0].ai_feedback %}
                <div class="content-section ai-feedback">
                    <h4>AI Insights</h4>
                    <p>{{ entries[0].ai_feedback }}</p>
                </div>
                {% endif %}
            </div>
        </div>
    </section>

    <section class="previous-entries">
        <h3 class="section-title">Previous Entries</h3>
        <div class="entries-scroll">
            {% for entry in entries[1:] %}
            <div class="entry-card" onclick="window.location.href='{{ url_for('journal.view_entry', entry_id=entry.id) }}'">
                <div class="entry-header">
                    <span class="entry-date">{{ entry.entry_date.strftime('%Y-%m-%d %H:%M') }}</span>
                    <span class="entry-mood">{{ entry.mood }}</span>
                </div>
                <div class="preview-indicator">Click to view full entry â†’</div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}
</div>
<script src="{{ url_for('static', filename='js/entries.js') }}"></script>
{% endblock %}